<!-- Carousel Section -->
<section id="carousel" class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Welcome to Mostar Local Bus Service</h2>
    <p class="text-center mb-4">
      Reliable and affordable public transport within Mostar.
    </p>

    <!-- Bootstrap Carousel -->
    <div
      id="carouselExampleAutoplaying"
      class="carousel slide"
      data-bs-ride="carousel"
      data-bs-interval="3000"
    >
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="carousel-image-container">
            <img
              appLazyLoad="MostarBridge.jpg"
              class="d-block w-100"
              alt="Mostar Sightseeing"
            />
            <div class="carousel-caption d-none d-md-block">
              <h3>Explore the Old Bridge</h3>
              <p>
                Discover the beauty of Mostar’s historic landmarks and scenic
                views.
              </p>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="carousel-image-container">
            <img 
            appLazyLoad="busevi.PNG" 
            class="d-block w-100" 
            alt="Bus Tours" 
            />
            <div class="carousel-caption d-none d-md-block">
              <h3>Comfortable Bus Services</h3>
              <p>
                Travel with comfort and enjoy a relaxing ride with our
                well-maintained buses.
              </p>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="carousel-image-container">
            <img
            appLazyLoad="1620px-Blagaj_Ceilings.jpg"
              class="d-block w-100"
              alt="Adventure Trips"
            />
            <div class="carousel-caption d-none d-md-block">
              <h3>Adventure Awaits</h3>
              <p>
                Join us for exciting trips to nearby destinations and explore
                more of the region.
              </p>
            </div>
          </div>
        </div>
      </div>
      <button
        class="carousel-control-prev"
        type="button"
        data-bs-target="#carouselExampleAutoplaying"
        data-bs-slide="prev"
      >
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button
        class="carousel-control-next"
        type="button"
        data-bs-target="#carouselExampleAutoplaying"
        data-bs-slide="next"
      >
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>
    </div>
  </div>
</section>

<div class="container">
  <h1>Buy a ticket</h1>
  <div class="station-select">
    <label for="stationDropdown">Select a Station:</label>
    <select id="stationDropdown" [(ngModel)]="selectedStationId">
      <option value="">Choose a station</option>
      @for (station of stations; track station.id) {
      <option [value]="station.id">{{ station.name }}</option>
      }
    </select>
  </div>

  @if (selectedStation) {
  <div class="station-info">
    <h2>{{ selectedStation.name }}</h2>
    <table>
      <thead>
        <tr>
          <th>Zone</th>
          <th>Bus Lines</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>{{ selectedStation.zone }}</td>
          <td>{{ selectedStation.busLines.join(", ") }}</td>
          <td>
            @if (!accountService.currentUser()) {<button
              class="buy-ticket"
              [routerLink]="'/register'"
            >
              Buy Ticket</button
            >}@else {<button class="buy-ticket" [routerLink]="'buy-ticket'">
              Buy Ticket</button
            >}
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  }
</div>

@if (!accountService.currentUser()) {
<div class="container mt-5">
  <div style="text-align: center">
    @if(!registerMode){
    <div class="text-center">
      <h3>For all the features</h3>
      <button class="btn btn-primary btn-lg me-2" [routerLink]="'/register'">
        Register
      </button>
      <button class="btn btn-secondary btn-lg me-2" [routerLink]="'/reset-password'">
        Reset password
      </button>
    </div>
    } @else {
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-6">
          <app-register
            (cancelRegister)="cancelRegisterMode($event)"
          ></app-register>
        </div>
      </div>
    </div>
    }
  </div>
</div>
}

<!-- Routes Section -->
<section id="routes" class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Bus Routes in Mostar</h2>
    <div class="row">
      <!-- Route 10 Card -->
      <div class="col-md-4 d-flex mb-4">
        <div class="card w-100">
          <div class="image-container-routes">
            <img
            appLazyLoad="Linija-10-crvena.png"
              class="card-img-top route-image"
              alt="Route 10"
            />
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Route 10: Sjeverni Logor - Blagaj</h5>
            <p class="card-text flex-grow-1">
              Bus from Sjeverni Logor to the Blagaj Tekke, a popular tourist
              destination.
            </p>
          </div>
        </div>
      </div>

      <!-- Route 6 Card -->
      <div class="col-md-4 d-flex mb-4">
        <div class="card w-100">
          <div class="image-container-routes">
            <img
            appLazyLoad="Linija-6-plava.png"
              class="card-img-top route-image"
              alt="Route 6"
            />
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">Route 6: Gorica - Zalik</h5>
            <p class="card-text flex-grow-1">
              A route connecting almost all the important places in Mostar, the
              most used route in Mostar.
            </p>
          </div>
        </div>
      </div>

      <!-- Route 22 Card -->
      <div class="col-md-4 d-flex mb-4">
        <div class="card w-100">
          <div class="image-container-routes">
            <img
            appLazyLoad="Linija-22-smedja.png"
              class="card-img-top route-image"
              alt="Route 22"
            />
          </div>
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">
              Route 22: Bišće Polje - Bijelo polje (Round)
            </h5>
            <p class="card-text flex-grow-1">
              A convenient route that connects places outside the city centre.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Explore More Routes Button -->
    @if (!accountService.currentUser()) {
    <div class="text-center">
      <a
        href="#more-routes"
        class="btn btn-more-routes btn-sm mt-4"
        [routerLink]="'/register'"
        >Explore More Routes</a
      >
    </div>
    } @else {
    <div class="text-center">
      <a href="#more-routes" class="btn btn-more-routes btn-sm mt-4"
        >Explore More Routes</a
      >
    </div>
    }
  </div>
</section>
<!-- Image Overlay -->

<div id="imageOverlay" class="image-overlay">
  <div class="overlay-content">
    <img id="enlargedImage" src="" alt="Enlarged Image" />
  </div>
</div>
<!-- Tours Section (Replaces Contact Us) -->
<section class="py-5">
  <div class="container">
    <h2 class="text-center mb-4">Popular Bus Tours from Mostar</h2>
    <div class="row">
      @for (tour of tours; track tour.id) {
      <div class="col-md-4 d-flex mb-4">
        <div class="card w-100">
          <div class="image-container">
            <img [appLazyLoad]="tour.image" [alt]="tour.title" class="card-img-top" />
          </div>
          <div class="card-body d-flex flex-column">
            <h3 class="card-title">{{ tour.title }}</h3>
            <p class="card-text flex-grow-1">{{ tour.description }}</p>
          </div>
        </div>
      </div>
      }
    </div>

    <!-- Explore More Tours Button -->
    @if (!accountService.currentUser()) {
    <div class="text-center">
      <a
        href="#more-tours"
        class="btn btn-more-tours btn-sm mt-4"
        [routerLink]="'/register'"
        >Explore More Tours</a
      >
    </div>
    } @else{
    <div class="text-center">
      <a href="#more-tours" class="btn btn-more-tours btn-sm mt-4"
        >Explore More Tours</a
      >
    </div>
    }
  </div>
</section>
