<div class="container mt-2">
<h5 class="modal-title">Update bus data</h5>
<form #updateManagerForm="ngForm" (ngSubmit)="saveChanges()">
    <div class="mb-3">
      <label class="form-label" for="firstName">First Name:</label>
      <input class="form-control" id="firstName" name="firstName" [(ngModel)]="managerUpdate.firstName" #firstName="ngModel" required minlength="2" maxlength="50" type="text">
      @if (formSubmitted && firstName.invalid) {
        @if (firstName.errors?.['required']) {
          <small>First name is required.</small>
        }
        @if (firstName.errors?.['minlength']) {
          <small>First name must be at least 2 characters long.</small>
        }
        @if (firstName.errors?.['maxlength']) {
          <small>First name cannot exceed 50 characters.</small>
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="lastName">Last Name:</label>
      <input class="form-control" id="lastName" name="lastName" [(ngModel)]="managerUpdate.lastName" #lastName="ngModel" required minlength="2" maxlength="50" type="text">
      @if (formSubmitted && lastName.invalid) {
        @if (lastName.errors?.['required']) {
          <small>Last name is required.</small>
        }
        @if (lastName.errors?.['minlength']) {
          <small>Last name must be at least 2 characters long.</small>
        }
        @if (lastName.errors?.['maxlength']) {
          <small>Last name cannot exceed 50 characters.</small>
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="email">Email:</label>
      <input class="form-control" id="email" name="email" [(ngModel)]="managerUpdate.email" #email="ngModel" required email type="email">
      @if (formSubmitted && email.invalid) {
        @if (email.errors?.['required']) {
          <small>Email is required.</small>
        }
        @if (email.errors?.['email']) {
          <small>Please enter a valid email address.</small>
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="birthDate">Birth Date:</label>
      <input class="form-control" id="birthDate" name="birthDate" [(ngModel)]="managerUpdate.birthDate" #birthDate="ngModel" required type="date" [max]="maxDate">
      @if (formSubmitted) {
        @if (birthDate.invalid) {
          @if (birthDate.errors?.['required']) {
            <small>Birth date is required.</small>
          }
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="address">Address:</label>
      <input class="form-control" id="address" name="address" [(ngModel)]="managerUpdate.address" #address="ngModel" required minlength="5" maxlength="100" type="text">
      @if (formSubmitted && address.invalid) {
        @if (address.errors?.['required']) {
          <small>Address is required.</small>
        }
        @if (address.errors?.['minlength']) {
          <small>Address must be at least 5 characters long.</small>
        }
        @if (address.errors?.['maxlength']) {
          <small>Address cannot exceed 100 characters.</small>
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="hireDate">Hire Date:</label>
      <input class="form-control" id="hireDate" name="hireDate" [(ngModel)]="managerUpdate.hireDate" #hireDate="ngModel" required type="date" [max]="maxDate">
      @if (formSubmitted) {
        @if (hireDate.invalid) {
          @if (hireDate.errors?.['required']) {
            <small>Hire date is required.</small>
          }
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="department">Department:</label>
      <select class="form-control" id="department" name="department" [(ngModel)]="managerUpdate.department" #department="ngModel" required>
        <option value="">Select a department</option>
        @for (dept of departments; track dept.id) {
          <option [value]="dept.name">{{dept.name}}</option>
        }
      </select>
      @if (formSubmitted && department.invalid) {
        @if (department.errors?.['required']) {
          <small>Department is required.</small>
        }
      }
    </div>
  
    <div class="mb-3">
      <label class="form-label" for="managerLevel">Manager Level:</label>
      <select class="form-control" id="managerLevel" name="managerLevel" [(ngModel)]="managerUpdate.managerLevel" #managerLevel="ngModel" required>
        <option value="">Select a manager level</option>
        @for (level of managerLevels; track level.id) {
          <option [value]="level.name">{{level.name}}</option>
        }
      </select>
      @if (formSubmitted && managerLevel.invalid) {
        @if (managerLevel.errors?.['required']) {
          <small>Manager level is required.</small>
        }
      }
    </div>
  
    <button type="submit" class="btn btn-primary">Save Changes</button>
    <button type="button" class="btn btn-danger" (click)="closeDialog()">Cancel</button>
  </form>
</div>